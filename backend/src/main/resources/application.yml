spring:
  application:
    name: Zastra

  profiles:
    active: dev

  # Disable Spring Boot default DataSource autoconfig (kills postgres fallback)
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration

  datasource:
    zastra:
      url: jdbc:postgresql://localhost:5432/zastra_db
      username: ${ZASTRA_DB_USERNAME}
      password: ${ZASTRA_DB_PASSWORD}
      driver-class-name: org.postgresql.Driver
      hikari:
        maximum-pool-size: 20
        minimum-idle: 5
        connection-timeout: 30000

    media:
      url: jdbc:postgresql://localhost:5432/media_db
      username: ${MEDIA_DB_USERNAME}
      password: ${MEDIA_DB_PASSWORD}
      driver-class-name: org.postgresql.Driver

  servlet:
    multipart:
      max-file-size: 200MB
      max-request-size: 500MB

  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
        jdbc:
          time-zone: UTC

  jackson:
    serialization:
      write-dates-as-timestamps: false

  # Email Configuration
  mail:
    host: smtp.gmail.com
    port: 587
    username: ${GMAIL_USERNAME}
    password: ${GMAIL_PASSWORD}
    properties:
      mail:
      smtp:
        auth: true
        starttls:
          enable: true
          required: true
        connectiontimeout: 5000
        timeout: 5000
        writetimeout: 5000
      default-encoding: UTF-8

server:
  port: 8080
  error:
    include-message: always
    include-binding-errors: always
    include-stacktrace: always

# JWT Configuration
jwt:
  secret: ${JWT_SECRET:myVerySecretKeyForJWTTokenGenerationThatShouldBeLongEnough}
  expiration: 86400000 # 24 hours in milliseconds

# File Upload Configuration
file:
  upload-dir: ${FILE_UPLOAD_DIR:./uploads}

# Google Authenticator
google:
  client:
    id: ${GOOGLE_CLIENT_ID}
    secret: ${GOOGLE_CLIENT_SECRET}


# Application URLs
app:
  base-url: ${APP_BASE_URL:http://localhost:8080}
  frontend-url: ${FRONTEND_URL:http://localhost:5173}

# Logging
logging:
  level:
    com.zastra: DEBUG
    org.hibernate.SQL: DEBUG
    org.springframework: INFO
    com.zaxxer.hikari.HikariConfig: DEBUG   # show each pool config
    com.zaxxer.hikari: TRACE                # show connection acquisition
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"
  file:
    name: logs/zastra-application.log

facebook:
  client:
    id: ${FACEBOOK_CLIENT_ID}
    secret: ${FACEBOOK_CLIENT_SECRET}


